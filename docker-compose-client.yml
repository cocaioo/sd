version: "3.9"

# ============================================================
# DOCKER COMPOSE PARA O PC QUE VAI RODAR O CLIENTE
# ============================================================
# Este arquivo deve ser usado na m치quina que executar치 o cliente RPC.
# Configure a vari치vel RPC_SERVER_HOST com o IP do PC que roda o servidor.

services:
  client:
    build: ./client
    container_name: rpc_client
    networks:
      - rpc_net
    stdin_open: true
    tty: true
    env_file:
      - .env
    environment:
      # IMPORTANTE: Configure aqui o IP/hostname do PC que roda o servidor
      # Agora configurado automaticamente via .env para IP: 192.168.1.160
      - RPC_SERVER_HOST=${RPC_SERVER_HOST:-192.168.1.160}
      - RPC_SERVER_PORT=${RPC_SERVER_PORT:-8000}
      - RPC_MONITOR_URL=${RPC_MONITOR_URL:-http://192.168.1.160:5000/control/clear}
      # Path compartilhado (opcional - s칩 para logs locais)
      - RPC_SHARED_PATH=/shared
    volumes:
      - client_logs:/shared
    restart: unless-stopped

networks:
  rpc_net:
    driver: bridge

volumes:
  client_logs:
    driver: local
